---
import type { CollectionEntry } from "astro:content";

interface Props {
  posts: CollectionEntry<"posts">[];
}

const { posts } = Astro.props;
---

<ul class="post-list">
  {
    posts.map((post) => {
      const date = new Date(post.data.publishDate);
      const year = date.getFullYear();
      const month = String(date.getMonth() + 1).padStart(2, "0");

      return (
        <li>
          <a href={`/p/${post.id}`} class="link row">
            <span class="date">
              {year} Â· {month}
            </span>
            <span class="title">{post.data.title}</span>
          </a>
        </li>
      );
    })
  }
</ul>

<style>
  .post-list {
    list-style: none;
    padding: 0.3rem 0.1rem;
    margin: 0;
    line-height: 1.6;
    text-wrap: wrap;
  }

  li::marker {
    content: "";
  }

  .post-list a {
    display: flex;
    gap: 0.75rem;
    color: inherit;
    text-decoration: none;
  }

  .date {
    font-variant-numeric: tabular-nums;
    white-space: nowrap;
    font-size: var(--font-size--1);
  }

  .title {
    text-decoration: underline;
  }

  .link {
    display: flex;
    align-items: baseline;
  }

  a:hover,
  a:focus-visible {
    color: reset;
  }

  .post-list a:hover .title,
  .post-list a:focus-visible .title {
    color: var(--ac);
  }
</style>
